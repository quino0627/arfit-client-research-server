# Migration `20200430132128-init`

This migration has been generated by quino0627 at 4/30/2020, 1:21:28 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE `arfit-research`.`_ExerciseToQuest` (
    `A` int NOT NULL ,
    `B` int NOT NULL 
) 
DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci

ALTER TABLE `arfit-research`.`Exercise` DROP FOREIGN KEY `Exercise_ibfk_2`,
DROP COLUMN `questId`;

CREATE UNIQUE INDEX `_ExerciseToQuest_AB_unique` ON `arfit-research`.`_ExerciseToQuest`(`A`,`B`)

CREATE  INDEX `_ExerciseToQuest_B_index` ON `arfit-research`.`_ExerciseToQuest`(`B`)

ALTER TABLE `arfit-research`.`_ExerciseToQuest` ADD FOREIGN KEY (`A`) REFERENCES `arfit-research`.`Exercise`(`id`) ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE `arfit-research`.`_ExerciseToQuest` ADD FOREIGN KEY (`B`) REFERENCES `arfit-research`.`Quest`(`id`) ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200428165439-init..20200430132128-init
--- datamodel.dml
+++ datamodel.dml
@@ -1,7 +1,7 @@
 datasource db {
   provider = "mysql"
-  url = "***"
+  url      = env("DATABASE_URL")
 }
 generator client {
   provider = "prisma-client-js"
@@ -21,9 +21,9 @@
 model Quest {
   id       Int        @default(autoincrement()) @id
   player   User       @relation(fields: [playerId], references: [id])
   playerId Int
-  exercise Exercise[]
+  exercise Exercise[] @relation(references: [id])
   sets     Int
   reps     Int
   weight   Int
   when     DateTime
@@ -36,9 +36,9 @@
   muscleMain String?
   muscleSub  String?
   machine    Machine? @relation(fields: [machineId], references: [id])
   machineId  Int?
-  questId    Int?
+  quests     Quest[]  @relation(references: [id])
 }
 model Machine {
   id                 Int        @default(autoincrement()) @id
```


